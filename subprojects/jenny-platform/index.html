<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://memoria-framework.dev/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://memoria-framework.dev/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://memoria-framework.dev/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://memoria-framework.dev/fonts/KaTeX_Main-Regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://memoria-framework.dev/fonts/KaTeX_Math-Italic.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://memoria-framework.dev/main.936beb930fd98ad42e9ffeb326821156010eee32296e56a34ddbc6be19fe80fa939278f5ca78e22e25b3e3a8808e25f8050913e6a9c92db586b3d82e09e3d179.css integrity="sha512-k2vrkw/ZitQun/6zJoIRVgEO7jIpblajTdvGvhn+gPqTknj1ynjiLiWz46iAjiX4BQkT5qnJLbWGs9guCePReQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Jenny Metaprogramming Platform - Memoria</title><meta name=description content="See Why C++ document for introduction.
Better C++ #C++ TMP, though pretty powerful, has its fundamental limitations. The following is the list of the most annoying ones. They are not about the language itself, but the productivity of the language in a programming-in-large context.
Template metaprograms can&amp;rsquo;t do any IO, so any input data structures must be represented as lists of types (and plain arrays of literal types). There is no convenient way to apply schema to a, for instance, hierarchical data."><link rel=canonical href=https://memoria-framework.dev/subprojects/jenny-platform/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Jenny Metaprogramming Platform"><meta property="og:description" content="See Why C++ document for introduction.
Better C++ #C++ TMP, though pretty powerful, has its fundamental limitations. The following is the list of the most annoying ones. They are not about the language itself, but the productivity of the language in a programming-in-large context.
Template metaprograms can&rsquo;t do any IO, so any input data structures must be represented as lists of types (and plain arrays of literal types). There is no convenient way to apply schema to a, for instance, hierarchical data."><meta property="og:url" content="https://memoria-framework.dev/subprojects/jenny-platform/"><meta property="og:site_name" content="Memoria"><meta property="article:published_time" content="2021-10-28T02:06:54-04:00"><meta property="article:modified_time" content="2021-10-28T02:06:54-04:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Jenny Metaprogramming Platform"><meta name=twitter:description content><meta name=twitter:card content="summary"><meta name=twitter:image:alt content="Jenny Metaprogramming Platform"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://memoria-framework.dev/#/schema/person/1","name":"Memoria","url":"https://memoria-framework.dev/","sameAs":[],"image":{"@type":"ImageObject","@id":"https://memoria-framework.dev/#/schema/image/1","url":"https://memoria-framework.dev/\u003cnil\u003e","width":null,"height":null,"caption":"Memoria"}},{"@type":"WebSite","@id":"https://memoria-framework.dev/#/schema/website/1","url":"https://memoria-framework.dev/","name":"Memoria","description":"","publisher":{"@id":"https://memoria-framework.dev/#/schema/person/1"}},{"@type":"WebPage","@id":"https://memoria-framework.dev/subprojects/jenny-platform/","url":"https://memoria-framework.dev/subprojects/jenny-platform/","name":"Jenny Metaprogramming Platform","description":"","isPartOf":{"@id":"https://memoria-framework.dev/#/schema/website/1"},"about":{"@id":"https://memoria-framework.dev/#/schema/person/1"},"datePublished":"2021-10-28T02:06:54CET","dateModified":"2021-10-28T02:06:54CET","breadcrumb":{"@id":"https://memoria-framework.dev/subprojects/jenny-platform/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://memoria-framework.dev/subprojects/jenny-platform/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://memoria-framework.dev/subprojects/jenny-platform/"]}]},{"@type":"BreadcrumbList","@id":"https://memoria-framework.dev/subprojects/jenny-platform/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://memoria-framework.dev/","url":"https://memoria-framework.dev/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://memoria-framework.dev/subprojects/","url":"https://memoria-framework.dev/subprojects/","name":"Subprojects"}},{"@type":"ListItem","position":3,"item":{"@id":"https://memoria-framework.dev/subprojects/jenny-platform/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://memoria-framework.dev/subprojects/jenny-platform/#/schema/image/2","url":null,"contentUrl":null,"caption":"Jenny Metaprogramming Platform"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://memoria-framework.dev/favicon.ico sizes=any><link rel=apple-touch-icon sizes=180x180 href=https://memoria-framework.dev/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://memoria-framework.dev/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://memoria-framework.dev/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://memoria-framework.dev/site.webmanifest></head><body class="subprojects single"><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label=Memoria>Memoria</a>
<button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Memoria</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"><li class=nav-item><a class="nav-link ps-0 py-1" href=/docs/overview/introduction/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/tutorial/quick-start>Tutorial</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/api/overview/>API</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/python/overview/>Python</a></li><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/subprojects/overview/>Subprojects</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/victor-smirnov/memoria/issues>Issues</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/victor-smirnov/memoria/discussions>Discussions</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/victor-smirnov/memoria/wiki>Releases</a></li></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder aria-label autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://github.com/victor-smirnov/memoria><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul></div></div></nav></header><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><h3>Subprojects</h3><ul class=list-unstyled><li><a class=docs-link href=/subprojects/overview/>Subprojects Overview</a></li><li><a class=docs-link href=/subprojects/smart-storage/>Smart Storage</a></li><li><a class=docs-link href=/subprojects/swimmer-db/>SwimmerDB</a></li><li><a class=docs-link href=/subprojects/risc-v-core/>Accelerated RISC-V Core for Memoria</a></li><li><a class=docs-link href=/subprojects/fuse-integration/>FUSE Integration</a></li><li><a class="docs-link active" href=/subprojects/jenny-platform/>Jenny Metaprogramming Platform</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h2 class=h3>On this page</h2><nav id=TableOfContents><ul><li><a href=#better-c>Better C++</a><ul><li><a href=#jenny-platform>Jenny Platform</a></li><li><a href=#metafunctions>Metafunctions</a></li><li><a href=#integrated-build-tools>Integrated Build Tools</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Jenny Metaprogramming Platform</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h2 class=h3>On this page</h2><nav id=TableOfContents><ul><li><a href=#better-c>Better C++</a><ul><li><a href=#jenny-platform>Jenny Platform</a></li><li><a href=#metafunctions>Metafunctions</a></li><li><a href=#integrated-build-tools>Integrated Build Tools</a></li></ul></li></ul></nav></div></nav><p>See <a href=/docs/overview/whyc++>Why C++</a> document for introduction.</p><h2 id=better-c>Better C++ <a href=#better-c class=anchor aria-hidden=true>#</a></h2><p>C++ TMP, though pretty powerful, has its fundamental limitations. The following is the list of the most annoying ones. They are not about the language itself, but the productivity of the language in a programming-in-large context.</p><ol><li>Template metaprograms can&rsquo;t do any IO, so any input data structures must be represented as lists of types (and plain arrays of literal types). There is no convenient way to apply schema to a, for instance, hierarchical data. C++ concepts to the rescue, but they just make the problem more obvious.</li><li>Very limited set of data structures that can be processed with constexpr functions. Constexpr functions are interpreted under the hood and operating with raw C++ AST objects. They are slow and consume a lot of memory.</li><li>Template metaprograms are almost impossible to debug. Constexpr functions are not that much better in this respect.</li><li>No AST-level macro system. Embedding DSLs is severely limited relative to modern languages.</li><li>Archaic build system, which the language itself has no integration with. Decent automation above C++ is a tricky thing, at least.</li><li>Many things would be way simpler, if C++ had modern Reflection capabilities instead of RTTI.</li></ol><p>By the end of 2019 Memoria hit the limits of TMP. Datatypes have been introduced that required a lot of additional metadata at compile time and run time. As well as a separate DSL for datatype description. Maintaining all this metadata using only native C++ facilities (typelist-based type descriptions) became infeasible.</p><h3 id=jenny-platform>Jenny Platform <a href=#jenny-platform class=anchor aria-hidden=true>#</a></h3><p>But instead of applying partial solutions like external code-generators to C++, <a href=https://github.com/victor-smirnov/jenny>the Jenny Metaprogramming Platform</a>, deeply integrated with C++ compiler and the build system, had been proposed. Jenny is based on experimental <a href=http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1240r1.pdf>Reflection TS proposal</a> adding the ability to call ordinary C/C++ functions at the compile time val the <code>metacall()</code> operator. Unlike constexpr functions, Jenny&rsquo;s metafunctions can utilize full set of C++ language and run-time objects: doing I/O, spawning threads, accessing lexical context and the compiler&rsquo;s APIs.</p><h3 id=metafunctions>Metafunctions <a href=#metafunctions class=anchor aria-hidden=true>#</a></h3><p>Both Clang and GCC allow running compiler plugins having access to entire translation unit&rsquo;s AST. These plugins can be used to analyze and transform the code. But interaction between source code and a plugin is seriously limited. Jenny&rsquo;s metafunctions can be seen as a flexible API between the compiler and the source code it is processing. Instead of writing a compiler plugin, it&rsquo;s possible to implement the same functionality with metafunctions. Speaking about Clang, its plugin API is seriously limited and intended mostly for static analyzers. Jenny&rsquo;s metafunctions have much more flexible access into AST and, therefore, they are more powerful.</p><p>Below there is an non-exhaustive list of what Jenny&rsquo;s metafunctions can do:</p><ol><li>Take and return all values that regular constexpr functions can work with. Wrapping regular function into <code>metacall()</code> operator makes it callable at compile-time. This way we, for instance, can use <code>printf()</code> to dump some debug info during compilation (including source code of programmatically-created types and functions).</li><li>Have access to the compiler-provided API for metafunctions:<ul><li>access lexical context of the metafunction&rsquo;s call site;</li><li>parse raw strings with C++ code snippets creating AST objects that can be manipulated further. If such AST object is returned from a metafunction, it&rsquo;s being inserted into the proper place in the target AST the metafunction was invoked from.</li></ul></li><li>Have access to Builder API, Project API and CompilationCache API. Compilation Units are aware about the context they are being compiled in.</li><li>Prepare runtime-available reflection and annotation metadata in the form of byte-array-mapped <a href=https://bitbucket.org/vsmirnov/memoria/wiki/String%20Data%20Notation>LinkedData</a>.</li><li>Access databases and external structured datasets.</li><li>Spawn threads, do any allowed IO, call external libraries like theorem provers and constraint solvers. Metafunctions is a natural tool to integrate project-specific AI instruments into the development process.</li></ol><h3 id=integrated-build-tools>Integrated Build Tools <a href=#integrated-build-tools class=anchor aria-hidden=true>#</a></h3><p>Besides metafunctions, Jenny is providing integrated build tool (JBT), that is using Memoria internally as a domain data model. It can be seen as &ldquo;make on steroids&rdquo;, but otherwise it&rsquo;s a fully featured generic batch processing data platform with pluggable storage engines, service-oriented architecture design and RESTful API to be a <a href=https://langserver.org/>Language Server</a> <em>backend</em> for Memoria/Jenny projects. Metaprograms require first-class support from the build tool to be actually usable in interactive (IDE-centric) workflows.</p><p>Unlike modern data platforms, JBT can be as versatile as the <code>make</code> tool. No any special setup is required for classical use-case scenarios.</p><div class="docs-navigation d-flex justify-content-between"><a href=/subprojects/fuse-integration/><div class="card my-1"><div class="card-body py-2">&larr; FUSE Integration</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://www.github.com/>Github</a>, <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=/js/bootstrap.min.f06fe6dc0efc9ee1e806021a0c338278256ecf163b547e8e8769fe60b0a1c0d505782852616ca4e1ff6a719eb8fc954e1d26031b8ab3ca71fb9d9998081b319e.js integrity="sha512-8G/m3A78nuHoBgIaDDOCeCVuzxY7VH6Oh2n+YLChwNUFeChSYWyk4f9qcZ64/JVOHSYDG4qzynH7nZmYCBsxng==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.349dda7f776056c3f39bc8ccb2eeab63bafd33d052a7266441e0912a4ad60fe0932e116b570cf3b263f7b944035ea6076fb02ee3b541df9fa4a48327b3b2314a.js integrity="sha512-NJ3af3dgVsPzm8jMsu6rY7r9M9BSpyZkQeCRKkrWD+CTLhFrVwzzsmP3uUQDXqYHb7Au47VB35+kpIMns7IxSg==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/katex.min.8370e08d29f784ff7c9a902e9acd0e13dbcc29df754e3b6169e0243fddd6efb28a8c3f22d1f82cb26e83f1bb2bf9f5923c696f7dad0e219d8617071e5b45ee15.js integrity="sha512-g3DgjSn3hP98mpAums0OE9vMKd91TjthaeAkP93W77KKjD8i0fgssm6D8bsr+fWSPGlvfa0OIZ2GFwceW0XuFQ==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/contrib/auto-render.min.17afcd53ae964f755803834d912cea7b9c8581cd7ab706ddf37fc95ae96365dd6e45f2083d19b63ead2d842388f769d174b4866fff4ddefb85bcbb7a4bba8434.js integrity="sha512-F6/NU66WT3VYA4NNkSzqe5yFgc16twbd83/JWuljZd1uRfIIPRm2Pq0thCOI92nRdLSGb/9N3vuFvLt6S7qENA==" crossorigin=anonymous defer></script>
<script src=/main.min.f4fc9672b82291a008c0e098e13b1cf76efef8389cf4ecfacd957f72a374aac24f8fcd030f4982efbf7ba73dbc434fa95bfa2ae5f78d156d7c269f97c9ef020d.js integrity="sha512-9PyWcrgikaAIwOCY4Tsc927++Dic9Oz6zZV/cqN0qsJPj80DD0mC7797pz28Q0+pW/oq5feNFW18Jp+Xye8CDQ==" crossorigin=anonymous defer></script>
<script src=https://memoria-framework.dev/index.min.58fe3aacc82c707b37a3645ba51a94a2d1400a153b95e2890fb5dda3bb79df0176ae8074d0e017edec4767df990ece151ff81ca58a86e292846beff6d66b9162.js integrity="sha512-WP46rMgscHs3o2RbpRqUotFAChU7leKJD7Xdo7t53wF2roB00OAX7exHZ9+ZDs4VH/gcpYqG4pKEa+/21muRYg==" crossorigin=anonymous defer></script></body></html>